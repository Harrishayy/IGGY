<!DOCTYPE html>
    <html lang="en">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/robot.css') }}">
    <head>
        <title>Robot Interface</title>
        <link rel="preconnect" href="https://fonts.googleapis.com">
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link href="https://fonts.googleapis.com/css2?family=Comfortaa:wght@300;700&display=swap" rel="stylesheet">
        <link href="https://fonts.googleapis.com/css2?family=Comfortaa:wght@300&display=swap" rel="stylesheet">
    </head>

    <div class="robot_control">
        <button onclick="move_robot('w')" type="button">Forward</button>
        <button onclick="move_robot('s')" type="button">Backward</button>
        <button onclick="move_robot('a')" type="button">Left</button>
        <button onclick="move_robot('d')" type="button">Right</button>

        <div class="input_box">
            <ion-icon name="lock_closed_outline"></ion-icon>
            <input type="number" min=0 max="100" id="speed" required>
            <label for="">Speed</label>
        </div>

        <div class="input_box">
            <ion-icon name="lock_closed_outline"></ion-icon>
            <input type="number" min="0" max="100" id="time" required>
            <label for="">Time</label>
        </div>

    </div>

    <img src="/camera_feed" class="camera">
      
</html>

<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>

<script language="JavaScript" type="text/javascript">
    function move_robot(direction) {
        const speed = document.getElementById("speed").value;
        const time = document.getElementById("time").value;

        console.log(speed,time);

        $.ajax({
            url: "/robot-move",
            type: "POST",
            data: JSON.stringify({"speed":speed,"time":time, "direction":direction}),
            contentType: "application/json; charset=utf-8",
            dataType: "json",
            success: function(response) {
                console.log(response);
            }
        });
    };

    document.addEventListener('keydown', function(event) {
        if(event.key == 'w') {
            move_robot('w');
        }
        else if(event.key == 's') {
            move_robot('s');
        }
        else if(event.key == 'a') {
            move_robot('a');
        }
        else if(event.key == 'd') {
            move_robot('d');
        }
    });
</script>
